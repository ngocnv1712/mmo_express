# MMO Express - No-Code Automation System

## Tổng quan

Hệ thống No-Code Automation cho phép người dùng tạo workflows tự động hóa mà không cần viết code, sử dụng giao diện kéo-thả trực quan.

```
┌─────────────────────────────────────────────────────────────────┐
│                   NO-CODE AUTOMATION SYSTEM                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                    VISUAL BUILDER                        │    │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐    │    │
│  │  │ Action  │──│ Action  │──│Condition│──│ Action  │    │    │
│  │  │ Block   │  │ Block   │  │  Block  │  │ Block   │    │    │
│  │  └─────────┘  └─────────┘  └────┬────┘  └─────────┘    │    │
│  │                                 │                       │    │
│  │                          ┌──────┴──────┐               │    │
│  │                          ▼             ▼               │    │
│  │                    ┌─────────┐   ┌─────────┐          │    │
│  │                    │  True   │   │  False  │          │    │
│  │                    │  Path   │   │  Path   │          │    │
│  │                    └─────────┘   └─────────┘          │    │
│  └─────────────────────────────────────────────────────────┘    │
│                              │                                   │
│                              ▼                                   │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                    EXECUTION ENGINE                      │    │
│  │  • Parse workflow JSON                                   │    │
│  │  • Execute actions sequentially                         │    │
│  │  • Handle conditions and loops                          │    │
│  │  • Manage variables                                     │    │
│  │  • Log execution results                                │    │
│  └─────────────────────────────────────────────────────────┘    │
│                              │                                   │
│                              ▼                                   │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                    BATCH EXECUTOR                        │    │
│  │  • Run workflow on multiple profiles                    │    │
│  │  • Parallel or sequential execution                     │    │
│  │  • Progress tracking                                    │    │
│  │  • Error handling and retry                            │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

---

## 1. Action Blocks (Khối hành động)

### 1.1 Navigation Actions

```
┌─────────────────────────────────────────────────────────────────┐
│                     NAVIGATION ACTIONS                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🌐 NAVIGATE TO URL                                      │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ URL: [https://facebook.com                      ] │  │    │
│  │  │ Wait until: [○ Load ● DOMContentLoaded ○ Network] │  │    │
│  │  │ Timeout: [30    ] seconds                         │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🔙 GO BACK                                              │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Navigate to previous page in history              │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🔄 REFRESH PAGE                                         │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Reload current page                               │  │    │
│  │  │ Wait until: [● DOMContentLoaded]                  │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  📑 NEW TAB                                              │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ URL: [https://google.com                        ] │  │    │
│  │  │ Switch to new tab: [✓]                           │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

### 1.2 Interaction Actions

```
┌─────────────────────────────────────────────────────────────────┐
│                    INTERACTION ACTIONS                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  👆 CLICK                                                │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Selector: [#login-button                        ] │  │    │
│  │  │ Click type: [● Single ○ Double ○ Right]          │  │    │
│  │  │ Wait for: [Navigation ▼]                         │  │    │
│  │  │ ☐ Force click (skip actionability checks)        │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  ⌨️ TYPE TEXT                                            │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Selector: [input[name="email"]                  ] │  │    │
│  │  │ Text: [{{email}}                                ] │  │    │
│  │  │ Delay between keys: [50  ] ms                     │  │    │
│  │  │ ☑ Clear field first                              │  │    │
│  │  │ ☑ Human-like typing (random delays)              │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  📝 FILL FORM                                            │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Selector: [input[name="email"]                  ] │  │    │
│  │  │ Value: [{{email}}                               ] │  │    │
│  │  │ (Sets value instantly, no typing animation)       │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  ✅ SELECT OPTION                                        │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Selector: [select#country                       ] │  │    │
│  │  │ Select by: [● Value ○ Label ○ Index]             │  │    │
│  │  │ Option: [VN                                     ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  ☑️ CHECK/UNCHECK                                        │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Selector: [input[type="checkbox"]               ] │  │    │
│  │  │ Action: [● Check ○ Uncheck ○ Toggle]             │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  📤 UPLOAD FILE                                          │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Selector: [input[type="file"]                   ] │  │    │
│  │  │ File path: [/path/to/image.jpg                  ] │  │    │
│  │  │ Or use variable: [{{profile.avatar}}            ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🖱️ HOVER                                                │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Selector: [.dropdown-menu                       ] │  │    │
│  │  │ Duration: [500  ] ms                              │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  📜 SCROLL                                               │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Direction: [● Down ○ Up ○ To Element]            │  │    │
│  │  │ Amount: [500  ] pixels                            │  │    │
│  │  │ Or selector: [#footer                           ] │  │    │
│  │  │ ☑ Smooth scroll (human-like)                     │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  ⌨️ PRESS KEY                                            │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Key: [Enter ▼]                                   │  │    │
│  │  │ Options: Enter, Tab, Escape, ArrowDown, Ctrl+A...│  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

### 1.3 Wait Actions

```
┌─────────────────────────────────────────────────────────────────┐
│                       WAIT ACTIONS                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  ⏱️ WAIT FOR ELEMENT                                     │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Selector: [.success-message                     ] │  │    │
│  │  │ State: [● Visible ○ Hidden ○ Attached ○ Detached]│  │    │
│  │  │ Timeout: [30    ] seconds                         │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  ⏳ WAIT FOR TIME                                        │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Duration: [3     ] seconds                        │  │    │
│  │  │ ☑ Random variation: ± [1   ] seconds             │  │    │
│  │  │   (Makes timing more human-like)                  │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🌐 WAIT FOR NAVIGATION                                  │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Wait until: [● Load ○ DOMContentLoaded ○ Network] │  │    │
│  │  │ Timeout: [30    ] seconds                         │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  📡 WAIT FOR NETWORK                                     │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ URL pattern: [**/api/login**                    ] │  │    │
│  │  │ Method: [● Any ○ GET ○ POST]                     │  │    │
│  │  │ Timeout: [30    ] seconds                         │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  📝 WAIT FOR TEXT                                        │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Text: [Login successful                         ] │  │    │
│  │  │ ☐ Case sensitive                                 │  │    │
│  │  │ ☐ Exact match (otherwise contains)               │  │    │
│  │  │ Timeout: [30    ] seconds                         │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

### 1.4 Data Actions

```
┌─────────────────────────────────────────────────────────────────┐
│                       DATA ACTIONS                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  📖 GET TEXT                                             │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Selector: [.user-name                           ] │  │    │
│  │  │ Save to variable: [username                     ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🔗 GET ATTRIBUTE                                        │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Selector: [img.avatar                           ] │  │    │
│  │  │ Attribute: [src                                 ] │  │    │
│  │  │ Save to variable: [avatarUrl                    ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🌐 GET URL                                              │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Save to variable: [currentUrl                   ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  📊 COUNT ELEMENTS                                       │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Selector: [.notification-item                   ] │  │    │
│  │  │ Save to variable: [notificationCount            ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  💾 SET VARIABLE                                         │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Variable name: [loginAttempts                   ] │  │    │
│  │  │ Value: [0                                       ] │  │    │
│  │  │ Type: [● String ○ Number ○ Boolean]              │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🧮 CALCULATE                                            │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Expression: [{{loginAttempts}} + 1              ] │  │    │
│  │  │ Save to variable: [loginAttempts                ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  📸 SCREENSHOT                                           │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ File name: [{{profile.name}}_{{timestamp}}.png  ] │  │    │
│  │  │ Type: [● Full page ○ Visible area ○ Element]     │  │    │
│  │  │ Element selector: [.main-content                ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🍪 EXPORT COOKIES                                       │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ File name: [{{profile.name}}_cookies.json       ] │  │    │
│  │  │ Format: [● JSON ○ Netscape TXT]                  │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  📥 IMPORT COOKIES                                       │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ File path: [/path/to/cookies.json               ] │  │    │
│  │  │ Or variable: [{{profile.cookiesFile}}           ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

### 1.5 Control Flow Actions

```
┌─────────────────────────────────────────────────────────────────┐
│                    CONTROL FLOW ACTIONS                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🔀 IF CONDITION                                         │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Condition Type: [Element exists ▼]               │  │    │
│  │  │                                                   │  │    │
│  │  │ ┌─ Element Exists ─────────────────────────────┐ │  │    │
│  │  │ │ Selector: [.error-message                   ]│ │  │    │
│  │  │ └─────────────────────────────────────────────┘ │  │    │
│  │  │                                                   │  │    │
│  │  │ ┌─ Compare Values ─────────────────────────────┐ │  │    │
│  │  │ │ Left: [{{loginAttempts}}                    ]│ │  │    │
│  │  │ │ Operator: [< ▼] (==, !=, <, >, <=, >=)      │ │  │    │
│  │  │ │ Right: [3                                   ]│ │  │    │
│  │  │ └─────────────────────────────────────────────┘ │  │    │
│  │  │                                                   │  │    │
│  │  │ ┌─ Text Contains ──────────────────────────────┐ │  │    │
│  │  │ │ Selector: [.message                         ]│ │  │    │
│  │  │ │ Contains: [success                          ]│ │  │    │
│  │  │ └─────────────────────────────────────────────┘ │  │    │
│  │  │                                                   │  │    │
│  │  │ ┌─ URL Contains ───────────────────────────────┐ │  │    │
│  │  │ │ URL contains: [/dashboard                   ]│ │  │    │
│  │  │ └─────────────────────────────────────────────┘ │  │    │
│  │  │                                                   │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  │                                                          │    │
│  │  Then: [Actions when TRUE]                              │    │
│  │  Else: [Actions when FALSE] (optional)                  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🔁 LOOP                                                 │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Loop Type: [For Each Element ▼]                  │  │    │
│  │  │                                                   │  │    │
│  │  │ ┌─ For Each Element ───────────────────────────┐ │  │    │
│  │  │ │ Selector: [.post-item                       ]│ │  │    │
│  │  │ │ Max items: [10    ]                          │ │  │    │
│  │  │ │ Variable name: [currentPost                 ]│ │  │    │
│  │  │ └─────────────────────────────────────────────┘ │  │    │
│  │  │                                                   │  │    │
│  │  │ ┌─ Repeat N Times ─────────────────────────────┐ │  │    │
│  │  │ │ Count: [5       ]                            │ │  │    │
│  │  │ │ Variable name: [i                           ]│ │  │    │
│  │  │ └─────────────────────────────────────────────┘ │  │    │
│  │  │                                                   │  │    │
│  │  │ ┌─ While Condition ────────────────────────────┐ │  │    │
│  │  │ │ Condition: [{{hasMore}} == true             ]│ │  │    │
│  │  │ │ Max iterations: [100  ] (safety limit)      │ │  │    │
│  │  │ └─────────────────────────────────────────────┘ │  │    │
│  │  │                                                   │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  │                                                          │    │
│  │  Loop body: [Actions to repeat]                         │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🛑 BREAK LOOP                                           │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Exit current loop immediately                     │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  ⏭️ CONTINUE                                             │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Skip to next iteration                            │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🚨 TRY-CATCH                                            │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Try: [Actions that might fail]                    │  │    │
│  │  │ Catch: [Actions on error]                         │  │    │
│  │  │ Finally: [Always run] (optional)                  │  │    │
│  │  │                                                   │  │    │
│  │  │ Error variable: [errorMessage                   ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  📞 CALL WORKFLOW                                        │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Workflow: [Login Facebook ▼]                     │  │    │
│  │  │ Parameters:                                       │  │    │
│  │  │   email: [{{profile.email}}                     ] │  │    │
│  │  │   password: [{{profile.password}}               ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🏁 STOP WORKFLOW                                        │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Status: [● Success ○ Failed]                     │  │    │
│  │  │ Message: [Completed successfully                ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

### 1.6 Advanced Actions

```
┌─────────────────────────────────────────────────────────────────┐
│                     ADVANCED ACTIONS                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  💻 EXECUTE JAVASCRIPT                                   │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Code:                                             │  │    │
│  │  │ ┌─────────────────────────────────────────────┐  │  │    │
│  │  │ │ return document.querySelector('.user').     │  │  │    │
│  │  │ │        innerText;                           │  │  │    │
│  │  │ └─────────────────────────────────────────────┘  │  │    │
│  │  │ Save result to: [userName                       ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🌐 HTTP REQUEST                                         │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ URL: [https://api.example.com/data              ] │  │    │
│  │  │ Method: [● GET ○ POST ○ PUT ○ DELETE]            │  │    │
│  │  │ Headers: (JSON)                                   │  │    │
│  │  │ Body: (JSON)                                      │  │    │
│  │  │ Save response to: [apiResponse                  ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🎰 RANDOM                                               │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Type: [Number between ▼]                         │  │    │
│  │  │                                                   │  │    │
│  │  │ ┌─ Number between ─────────────────────────────┐ │  │    │
│  │  │ │ Min: [1     ] Max: [100   ]                  │ │  │    │
│  │  │ └─────────────────────────────────────────────┘ │  │    │
│  │  │                                                   │  │    │
│  │  │ ┌─ Random from list ───────────────────────────┐ │  │    │
│  │  │ │ Items: [Hello, Hi, Hey, Xin chào            ]│ │  │    │
│  │  │ └─────────────────────────────────────────────┘ │  │    │
│  │  │                                                   │  │    │
│  │  │ ┌─ Random string ──────────────────────────────┐ │  │    │
│  │  │ │ Length: [10    ]                             │ │  │    │
│  │  │ │ Characters: [● Alphanumeric ○ Letters only] │ │  │    │
│  │  │ └─────────────────────────────────────────────┘ │  │    │
│  │  │                                                   │  │    │
│  │  │ Save to variable: [randomValue                  ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  📋 CLIPBOARD                                            │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Action: [● Copy to clipboard ○ Paste from]       │  │    │
│  │  │ Text: [{{generatedCode}}                        ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  📧 SEND NOTIFICATION                                    │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Type: [● Desktop ○ Telegram ○ Discord]           │  │    │
│  │  │ Title: [Task Completed                          ] │  │    │
│  │  │ Message: [Profile {{profile.name}} done!        ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  📝 LOG MESSAGE                                          │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Level: [● Info ○ Warning ○ Error]                │  │    │
│  │  │ Message: [Step completed: {{stepName}}          ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  🔌 SOLVE CAPTCHA                                        │    │
│  │  ┌───────────────────────────────────────────────────┐  │    │
│  │  │ Provider: [2Captcha ▼]                           │  │    │
│  │  │ Type: [reCAPTCHA v2 ▼]                           │  │    │
│  │  │ Site key: (auto-detect or manual)                │  │    │
│  │  │ Save token to: [captchaToken                    ] │  │    │
│  │  └───────────────────────────────────────────────────┘  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

---

## 2. Variable System

### 2.1 Variable Types

```
┌─────────────────────────────────────────────────────────────────┐
│                      VARIABLE SYSTEM                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─ Built-in Variables ─────────────────────────────────────┐   │
│  │                                                           │   │
│  │  Profile Variables:                                      │   │
│  │  {{profile.id}}          → Profile ID                    │   │
│  │  {{profile.name}}        → Profile name                  │   │
│  │  {{profile.email}}       → Linked email                  │   │
│  │  {{profile.password}}    → Linked password               │   │
│  │  {{profile.phone}}       → Linked phone                  │   │
│  │  {{profile.proxy}}       → Proxy string                  │   │
│  │                                                           │   │
│  │  Session Variables:                                      │   │
│  │  {{session.id}}          → Current session ID            │   │
│  │  {{session.url}}         → Current page URL              │   │
│  │  {{session.title}}       → Current page title            │   │
│  │                                                           │   │
│  │  System Variables:                                       │   │
│  │  {{timestamp}}           → Unix timestamp                │   │
│  │  {{date}}                → Current date (YYYY-MM-DD)     │   │
│  │  {{time}}                → Current time (HH:MM:SS)       │   │
│  │  {{random}}              → Random number 0-999999        │   │
│  │  {{uuid}}                → Random UUID                   │   │
│  │                                                           │   │
│  │  Loop Variables:                                         │   │
│  │  {{loop.index}}          → Current iteration (0-based)   │   │
│  │  {{loop.count}}          → Current iteration (1-based)   │   │
│  │  {{loop.first}}          → Is first iteration (bool)     │   │
│  │  {{loop.last}}           → Is last iteration (bool)      │   │
│  │                                                           │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌─ Custom Variables ────────────────────────────────────────┐   │
│  │                                                           │   │
│  │  Created by actions like:                                │   │
│  │  • Get Text → {{extractedText}}                          │   │
│  │  • Set Variable → {{myVar}}                              │   │
│  │  • Calculate → {{result}}                                │   │
│  │  • Loop element → {{currentItem}}                        │   │
│  │                                                           │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌─ Data Source Variables ───────────────────────────────────┐   │
│  │                                                           │   │
│  │  From CSV/Excel:                                         │   │
│  │  {{data.column1}}        → Value from column1            │   │
│  │  {{data.email}}          → Value from email column       │   │
│  │  {{data[0]}}             → First column value            │   │
│  │                                                           │   │
│  │  From JSON:                                              │   │
│  │  {{data.user.name}}      → Nested object access          │   │
│  │  {{data.items[0].id}}    → Array + object access         │   │
│  │                                                           │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

### 2.2 Variable Transformations

```
┌─────────────────────────────────────────────────────────────────┐
│                   VARIABLE TRANSFORMATIONS                       │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  Syntax: {{variable | transform}}                               │
│                                                                  │
│  ┌─ String Transforms ───────────────────────────────────────┐   │
│  │                                                           │   │
│  │  {{name | uppercase}}      → "JOHN DOE"                  │   │
│  │  {{name | lowercase}}      → "john doe"                  │   │
│  │  {{name | capitalize}}     → "John Doe"                  │   │
│  │  {{name | trim}}           → Remove whitespace           │   │
│  │  {{text | truncate:50}}    → First 50 chars + "..."      │   │
│  │  {{email | split:@:0}}     → Part before @               │   │
│  │  {{text | replace:old:new}}→ Replace text                │   │
│  │  {{text | regex:pattern}}  → Extract with regex          │   │
│  │                                                           │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌─ Number Transforms ───────────────────────────────────────┐   │
│  │                                                           │   │
│  │  {{price | round}}         → Round to integer            │   │
│  │  {{price | round:2}}       → Round to 2 decimals         │   │
│  │  {{count | pad:5}}         → "00042"                     │   │
│  │  {{amount | currency}}     → "$1,234.56"                 │   │
│  │                                                           │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌─ Date Transforms ─────────────────────────────────────────┐   │
│  │                                                           │   │
│  │  {{timestamp | date}}      → "2024-01-15"                │   │
│  │  {{timestamp | time}}      → "14:30:25"                  │   │
│  │  {{timestamp | datetime}}  → "2024-01-15 14:30:25"       │   │
│  │  {{timestamp | format:DD/MM/YYYY}} → "15/01/2024"        │   │
│  │                                                           │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌─ Encoding Transforms ─────────────────────────────────────┐   │
│  │                                                           │   │
│  │  {{text | urlencode}}      → URL encoded                 │   │
│  │  {{text | base64}}         → Base64 encoded              │   │
│  │  {{text | md5}}            → MD5 hash                    │   │
│  │  {{json | stringify}}      → JSON string                 │   │
│  │  {{text | jsonparse}}      → Parse JSON                  │   │
│  │                                                           │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

---

## 3. Visual Workflow Builder UI

```
┌─────────────────────────────────────────────────────────────────┐
│  Automation Builder                                    [−][□][×]│
├─────────────────────────────────────────────────────────────────┤
│  [Workflows] [Schedules] [Logs]                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─ Action Palette ─────┐  ┌─ Workflow Canvas ───────────────┐  │
│  │                      │  │                                  │  │
│  │  📁 Navigation       │  │  ┌────────────────────────────┐ │  │
│  │   ├─ 🌐 Navigate     │  │  │ 🚀 START                   │ │  │
│  │   ├─ 🔙 Go Back      │  │  └────────────┬───────────────┘ │  │
│  │   ├─ 🔄 Refresh      │  │               │                 │  │
│  │   └─ 📑 New Tab      │  │               ▼                 │  │
│  │                      │  │  ┌────────────────────────────┐ │  │
│  │  📁 Interaction      │  │  │ 🌐 Navigate to URL         │ │  │
│  │   ├─ 👆 Click        │  │  │ facebook.com               │ │  │
│  │   ├─ ⌨️ Type         │  │  └────────────┬───────────────┘ │  │
│  │   ├─ 📝 Fill Form    │  │               │                 │  │
│  │   ├─ ✅ Select       │  │               ▼                 │  │
│  │   ├─ 📤 Upload       │  │  ┌────────────────────────────┐ │  │
│  │   ├─ 🖱️ Hover        │  │  │ ⏱️ Wait for Element        │ │  │
│  │   └─ 📜 Scroll       │  │  │ #email                     │ │  │
│  │                      │  │  └────────────┬───────────────┘ │  │
│  │  📁 Wait             │  │               │                 │  │
│  │   ├─ ⏱️ Wait Element │  │               ▼                 │  │
│  │   ├─ ⏳ Wait Time    │  │  ┌────────────────────────────┐ │  │
│  │   ├─ 🌐 Wait Nav     │  │  │ ⌨️ Type Text               │ │  │
│  │   └─ 📡 Wait Network │  │  │ #email ← {{email}}         │ │  │
│  │                      │  │  └────────────┬───────────────┘ │  │
│  │  📁 Data             │  │               │                 │  │
│  │   ├─ 📖 Get Text     │  │               ▼                 │  │
│  │   ├─ 💾 Set Variable │  │  ┌────────────────────────────┐ │  │
│  │   ├─ 📸 Screenshot   │  │  │ ⌨️ Type Text               │ │  │
│  │   └─ 🍪 Cookies      │  │  │ #pass ← {{password}}       │ │  │
│  │                      │  │  └────────────┬───────────────┘ │  │
│  │  📁 Control Flow     │  │               │                 │  │
│  │   ├─ 🔀 If Condition │  │               ▼                 │  │
│  │   ├─ 🔁 Loop         │  │  ┌────────────────────────────┐ │  │
│  │   ├─ 🚨 Try-Catch    │  │  │ 👆 Click                   │ │  │
│  │   └─ 📞 Call Workflow│  │  │ button[name="login"]       │ │  │
│  │                      │  │  └────────────┬───────────────┘ │  │
│  │  📁 Advanced         │  │               │                 │  │
│  │   ├─ 💻 JavaScript   │  │               ▼                 │  │
│  │   ├─ 🌐 HTTP Request │  │  ┌────────────────────────────┐ │  │
│  │   ├─ 🎰 Random       │  │  │ 🔀 If Condition            │ │  │
│  │   └─ 🔌 Solve Captcha│  │  │ URL contains "/home"       │ │  │
│  │                      │  │  └─────┬──────────┬───────────┘ │  │
│  └──────────────────────┘  │        │ YES      │ NO          │  │
│                            │        ▼          ▼             │  │
│  ┌─ Properties Panel ───┐  │  ┌──────────┐ ┌──────────┐     │  │
│  │                      │  │  │📸 Screen │ │🔁 Retry  │     │  │
│  │  Selected: Click     │  │  │ shot     │ │ Login    │     │  │
│  │                      │  │  └────┬─────┘ └────┬─────┘     │  │
│  │  Selector:           │  │       │            │            │  │
│  │  [button[name="...] │  │       └─────┬──────┘            │  │
│  │                      │  │             │                   │  │
│  │  Click type:         │  │             ▼                   │  │
│  │  ● Single ○ Double   │  │  ┌────────────────────────────┐ │  │
│  │                      │  │  │ 🏁 END                     │ │  │
│  │  Wait for:           │  │  │ Status: Success            │ │  │
│  │  [Navigation ▼]      │  │  └────────────────────────────┘ │  │
│  │                      │  │                                  │  │
│  │  ☐ Force click       │  └──────────────────────────────────┘  │
│  │                      │                                        │
│  │  [Delete] [Duplicate]│  [▶ Run Test] [💾 Save] [📤 Export]   │
│  └──────────────────────┘                                        │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

---

## 4. Batch Execution

```
┌─────────────────────────────────────────────────────────────────┐
│                      BATCH EXECUTION                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  Run Workflow: [Login Facebook ▼]                       │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─ Select Profiles ────────────────────────────────────────┐   │
│  │                                                           │   │
│  │  ☑ Windows Chrome 1     │ email1@gmail.com               │   │
│  │  ☑ Windows Chrome 2     │ email2@gmail.com               │   │
│  │  ☑ MacBook M2           │ email3@gmail.com               │   │
│  │  ☐ Linux Firefox        │ email4@gmail.com               │   │
│  │  ☑ iPhone 15 Pro        │ email5@gmail.com               │   │
│  │                                                           │   │
│  │  [Select All] [Select None] [Select by Tag...]          │   │
│  │                                                           │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌─ Data Source (Optional) ─────────────────────────────────┐   │
│  │                                                           │   │
│  │  ● No data source                                        │   │
│  │  ○ CSV file: [                          ] [Browse]       │   │
│  │  ○ Excel file: [                        ] [Browse]       │   │
│  │  ○ Google Sheets: [Sheet URL            ] [Connect]      │   │
│  │                                                           │   │
│  │  Column mapping:                                         │   │
│  │  {{data.email}} ← Column A                               │   │
│  │  {{data.password}} ← Column B                            │   │
│  │                                                           │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌─ Execution Options ──────────────────────────────────────┐   │
│  │                                                           │   │
│  │  Mode: ● Sequential (one by one)                         │   │
│  │        ○ Parallel: [5   ] profiles at a time             │   │
│  │                                                           │   │
│  │  Delay between profiles: [3    ] - [10   ] seconds       │   │
│  │                                                           │   │
│  │  On error:                                               │   │
│  │    ● Continue to next profile                            │   │
│  │    ○ Stop all execution                                  │   │
│  │    ○ Retry [3   ] times, then continue                   │   │
│  │                                                           │   │
│  │  ☑ Take screenshot on error                              │   │
│  │  ☑ Save logs to file                                     │   │
│  │  ☐ Send notification on complete                         │   │
│  │                                                           │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌─ Progress ───────────────────────────────────────────────┐   │
│  │                                                           │   │
│  │  Overall: ████████████░░░░░░░░░░░░░ 4/10 (40%)           │   │
│  │                                                           │   │
│  │  ┌─────────────────┬──────────┬──────────────────────┐   │   │
│  │  │ Profile         │ Status   │ Message              │   │   │
│  │  ├─────────────────┼──────────┼──────────────────────┤   │   │
│  │  │ Windows Chrome 1│ ✅ Done   │ Login successful     │   │   │
│  │  │ Windows Chrome 2│ ✅ Done   │ Login successful     │   │   │
│  │  │ MacBook M2      │ ❌ Failed │ Captcha required     │   │   │
│  │  │ iPhone 15 Pro   │ 🔄 Running│ Typing password...   │   │   │
│  │  │ ...             │ ⏳ Pending│                      │   │   │
│  │  └─────────────────┴──────────┴──────────────────────┘   │   │
│  │                                                           │   │
│  │  Elapsed: 00:05:32    Remaining: ~00:08:00               │   │
│  │                                                           │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  [▶ Start] [⏸ Pause] [⏹ Stop] [📊 View Logs]                   │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

---

## 5. Scheduling System

```
┌─────────────────────────────────────────────────────────────────┐
│                      SCHEDULE MANAGER                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─ Create Schedule ────────────────────────────────────────┐   │
│  │                                                           │   │
│  │  Name: [Daily Facebook Login                           ] │   │
│  │                                                           │   │
│  │  Workflow: [Login Facebook ▼]                           │   │
│  │  Profiles: [Tag: Facebook ▼] (15 profiles)              │   │
│  │                                                           │   │
│  │  Schedule Type:                                          │   │
│  │  ○ One time: [2024-01-20] [14:30]                       │   │
│  │  ● Recurring:                                            │   │
│  │     Every: [1   ] [Day(s) ▼]                            │   │
│  │     At: [08:00] - [10:00] (random within range)         │   │
│  │     On days: ☑Mo ☑Tu ☑We ☑Th ☑Fr ☐Sa ☐Su              │   │
│  │  ○ Cron expression: [0 8 * * 1-5                      ] │   │
│  │                                                           │   │
│  │  Active: [✓]                                            │   │
│  │                                                           │   │
│  │  [Save Schedule]                                         │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌─ Scheduled Tasks ────────────────────────────────────────┐   │
│  │                                                           │   │
│  │  │ Name                │ Next Run      │ Status │ Actions│   │
│  │  ├─────────────────────┼───────────────┼────────┼────────┤   │
│  │  │ Daily FB Login      │ Tomorrow 08:32│ Active │ ✏️ 🗑️ ⏸│   │
│  │  │ Weekly TikTok Post  │ Monday 14:00  │ Active │ ✏️ 🗑️ ⏸│   │
│  │  │ Hourly Check        │ In 45 minutes │ Paused │ ✏️ 🗑️ ▶│   │
│  │                                                           │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌─ Execution History ──────────────────────────────────────┐   │
│  │                                                           │   │
│  │  │ Schedule       │ Started     │ Duration│ Result       │   │
│  │  ├────────────────┼─────────────┼─────────┼──────────────┤   │
│  │  │ Daily FB Login │ Today 08:15 │ 12m 30s │ ✅ 14/15 OK  │   │
│  │  │ Daily FB Login │ Yesterday   │ 11m 45s │ ✅ 15/15 OK  │   │
│  │  │ Weekly TikTok  │ 3 days ago  │ 25m 10s │ ⚠️ 8/10 OK   │   │
│  │                                                           │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

---

## 6. Workflow JSON Schema

```json
{
  "id": "workflow-uuid",
  "name": "Login Facebook",
  "version": "1.0.0",
  "description": "Đăng nhập Facebook với email/password",
  "author": "User",
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T14:30:00Z",

  "parameters": [
    {
      "name": "email",
      "type": "string",
      "required": true,
      "description": "Email đăng nhập"
    },
    {
      "name": "password",
      "type": "string",
      "required": true,
      "secret": true,
      "description": "Mật khẩu"
    }
  ],

  "variables": {
    "loginAttempts": 0,
    "maxAttempts": 3
  },

  "steps": [
    {
      "id": "step-1",
      "type": "navigate",
      "name": "Go to Facebook",
      "config": {
        "url": "https://facebook.com",
        "waitUntil": "domcontentloaded",
        "timeout": 30000
      }
    },
    {
      "id": "step-2",
      "type": "wait-element",
      "name": "Wait for email input",
      "config": {
        "selector": "#email",
        "state": "visible",
        "timeout": 10000
      }
    },
    {
      "id": "step-3",
      "type": "type",
      "name": "Enter email",
      "config": {
        "selector": "#email",
        "text": "{{email}}",
        "delay": 50,
        "humanLike": true
      }
    },
    {
      "id": "step-4",
      "type": "type",
      "name": "Enter password",
      "config": {
        "selector": "#pass",
        "text": "{{password}}",
        "delay": 50,
        "humanLike": true
      }
    },
    {
      "id": "step-5",
      "type": "click",
      "name": "Click login button",
      "config": {
        "selector": "button[name='login']",
        "clickType": "single",
        "waitFor": "navigation"
      }
    },
    {
      "id": "step-6",
      "type": "condition",
      "name": "Check login result",
      "config": {
        "type": "url-contains",
        "value": "/home"
      },
      "then": [
        {
          "id": "step-7",
          "type": "screenshot",
          "name": "Screenshot success",
          "config": {
            "filename": "{{profile.name}}_login_success.png"
          }
        },
        {
          "id": "step-8",
          "type": "stop",
          "name": "Complete",
          "config": {
            "status": "success",
            "message": "Login successful"
          }
        }
      ],
      "else": [
        {
          "id": "step-9",
          "type": "screenshot",
          "name": "Screenshot failure",
          "config": {
            "filename": "{{profile.name}}_login_failed.png"
          }
        },
        {
          "id": "step-10",
          "type": "stop",
          "name": "Failed",
          "config": {
            "status": "failed",
            "message": "Login failed - check screenshot"
          }
        }
      ]
    }
  ]
}
```

---

## 7. Implementation Files

```
sidecar/
├── automation/
│   ├── index.js              # Main automation module
│   ├── executor.js           # Workflow execution engine
│   ├── parser.js             # Workflow JSON parser
│   ├── variables.js          # Variable system
│   ├── scheduler.js          # Schedule manager
│   │
│   ├── actions/
│   │   ├── index.js          # Action registry
│   │   ├── navigation.js     # Navigate, back, refresh, new-tab
│   │   ├── interaction.js    # Click, type, fill, select, hover, scroll
│   │   ├── wait.js           # Wait element, time, navigation, network
│   │   ├── data.js           # Get text, set variable, screenshot
│   │   ├── control.js        # If, loop, break, continue, try-catch
│   │   └── advanced.js       # JavaScript, HTTP, random, captcha
│   │
│   └── templates/
│       ├── login-facebook.json
│       ├── login-tiktok.json
│       ├── post-facebook.json
│       └── scroll-feed.json

frontend/src/lib/
├── automation/
│   ├── AutomationBuilder.svelte   # Visual workflow builder
│   ├── ActionPalette.svelte       # Action blocks sidebar
│   ├── ActionBlock.svelte         # Single action block
│   ├── WorkflowCanvas.svelte      # Drag-drop canvas
│   ├── PropertyPanel.svelte       # Action properties
│   ├── VariableEditor.svelte      # Variable management
│   ├── BatchRunner.svelte         # Batch execution UI
│   ├── ScheduleManager.svelte     # Schedule UI
│   └── ExecutionLog.svelte        # Logs viewer
```

---

## 8. Implementation Priority

| Phase | Feature | Priority |
|-------|---------|----------|
| 8.1 | Action executor engine | P0 |
| 8.2 | Basic actions (navigate, click, type, wait) | P0 |
| 8.3 | Variable system | P0 |
| 8.4 | Control flow (if, loop) | P1 |
| 8.5 | Visual builder UI | P1 |
| 8.6 | Batch execution | P1 |
| 8.7 | Data source (CSV/Excel) | P2 |
| 8.8 | Scheduling system | P2 |
| 8.9 | Advanced actions (captcha, HTTP) | P2 |
| 8.10 | Workflow templates | P2 |
| 8.11 | Account Warm-up System | P1 |

---

## 9. Account Warm-up System 🆕

Hệ thống tự động "làm nóng" tài khoản mới để tránh bị ban.

### 9.1 Vấn đề

Khi tạo account mới trên các nền tảng (Facebook, TikTok, Instagram...), nếu ngay lập tức:
- Đăng nhiều bài
- Like/comment spam
- Add nhiều bạn bè
- Chạy automation

→ **Account bị flag là bot → BAN**

### 9.2 Giải pháp

**Warm-up Schedule** - Tăng dần hoạt động theo thời gian:

```
Tuần 1 (Ngày 1-7):   Login + Scroll feed 5-10 phút + Like 2-5 bài
Tuần 2 (Ngày 8-14):  + Comment 1-3 + Add friends 2-5 + Post 1 bài
Tuần 3 (Ngày 15-21): + Hoạt động bình thường + Join groups
Sau 21 ngày:         Account đã "nóng" → có thể automation
```

### 9.3 Kiến trúc

```
┌─────────────────────────────────────────────────────────────┐
│                 ACCOUNT WARM-UP SYSTEM                       │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌─────────────────────────────────────────────────────┐    │
│  │              WARM-UP TEMPLATES                       │    │
│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐            │    │
│  │  │ Facebook │ │  TikTok  │ │Instagram │            │    │
│  │  │ 21 days  │ │ 14 days  │ │ 21 days  │            │    │
│  │  └──────────┘ └──────────┘ └──────────┘            │    │
│  └─────────────────────────────────────────────────────┘    │
│                          │                                   │
│                          ▼                                   │
│  ┌─────────────────────────────────────────────────────┐    │
│  │              WARM-UP SCHEDULER                       │    │
│  │  • Chạy theo lịch hàng ngày (09:00, 14:00, 20:00)   │    │
│  │  • Random delay ±30 phút                            │    │
│  │  • Track progress từng profile                      │    │
│  └─────────────────────────────────────────────────────┘    │
│                          │                                   │
│                          ▼                                   │
│  ┌─────────────────────────────────────────────────────┐    │
│  │              WARM-UP EXECUTOR                        │    │
│  │  • Generate actions theo phase/day                   │    │
│  │  • Execute via Workflow Engine                       │    │
│  │  • Log daily activities                             │    │
│  │  • Update progress                                  │    │
│  └─────────────────────────────────────────────────────┘    │
│                          │                                   │
│                          ▼                                   │
│  ┌─────────────────────────────────────────────────────┐    │
│  │              PROGRESS TRACKING                       │    │
│  │  Profile A: Day 5/21  ████░░░░░░ 24% (Phase 1)      │    │
│  │  Profile B: Day 12/21 ██████░░░░ 57% (Phase 2)      │    │
│  │  Profile C: Day 21/21 ██████████ ✓  (Completed)     │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

### 9.4 Warm-up Template Schema

```javascript
{
  id: 'warmup-facebook-21',
  name: 'Facebook Warm-up 21 ngày',
  platform: 'facebook',
  totalDays: 21,
  phases: [
    {
      name: 'Phase 1 - Làm quen',
      days: [1, 7],
      dailyActions: {
        login: true,
        scrollFeed: { min: 5, max: 10 },    // phút
        like: { min: 2, max: 5 },
        comment: { min: 0, max: 1 },
        post: { min: 0, max: 0 },
        addFriend: { min: 0, max: 0 }
      }
    },
    {
      name: 'Phase 2 - Tương tác nhẹ',
      days: [8, 14],
      dailyActions: {
        login: true,
        scrollFeed: { min: 10, max: 15 },
        like: { min: 5, max: 10 },
        comment: { min: 1, max: 3 },
        post: { min: 0, max: 1 },
        addFriend: { min: 2, max: 5 }
      }
    },
    {
      name: 'Phase 3 - Hoạt động bình thường',
      days: [15, 21],
      dailyActions: {
        login: true,
        scrollFeed: { min: 15, max: 20 },
        like: { min: 10, max: 20 },
        comment: { min: 3, max: 5 },
        post: { min: 1, max: 2 },
        addFriend: { min: 3, max: 5 }
      }
    }
  ],
  schedule: {
    timezone: 'Asia/Ho_Chi_Minh',
    runAt: ['09:00', '14:00', '20:00'],
    randomDelay: 30  // ±30 phút
  }
}
```

### 9.5 Progress Schema

```javascript
{
  id: 'progress-xxx',
  warmupId: 'warmup-facebook-21',
  profileId: 'profile-001',
  profileName: 'Account FB 001',
  startDate: '2024-01-01',
  currentDay: 5,
  currentPhase: 1,
  status: 'running',  // pending, running, paused, completed, failed
  dailyLogs: [
    {
      day: 1,
      date: '2024-01-01',
      actions: { login: 1, scrollFeed: 7, like: 3, comment: 0 },
      status: 'completed'
    }
  ],
  nextRunAt: '2024-01-06T09:00:00',
  completedAt: null
}
```

### 9.6 Pre-built Templates

| Platform | Days | Phases | Actions |
|----------|------|--------|---------|
| Facebook | 21 | 3 | Login, Scroll, Like, Comment, Post, Add Friends |
| TikTok | 14 | 2 | Watch, Like, Comment, Follow, Post |
| Instagram | 21 | 3 | Browse, Like, Comment, Follow, Post, Story |
| Google | 7 | 2 | Search, Browse, Watch YouTube |
| Twitter/X | 14 | 2 | Browse, Like, Retweet, Tweet |

### 9.7 Files Structure

```
sidecar/
├── warmup/
│   ├── schema.js        # Warm-up schema & validation
│   ├── templates.js     # Pre-built templates
│   ├── executor.js      # Execute daily actions
│   └── scheduler.js     # Schedule warm-up runs
├── database/
│   └── warmup.js        # Database operations

frontend/src/lib/
├── warmup/
│   ├── WarmupDashboard.svelte       # Main dashboard
│   ├── WarmupTemplateEditor.svelte  # Edit templates
│   ├── WarmupProgress.svelte        # Progress cards
│   └── WarmupStartModal.svelte      # Start warm-up modal
```
